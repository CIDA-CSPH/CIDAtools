<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>CIDA-coding-guidelines • CIDAtools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CIDA-coding-guidelines">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CIDAtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/alpine.html">Alpine HPC</a></li>
    <li><a class="dropdown-item" href="../articles/CIDA_BIOS_Cluster.html">Computing on the CSPH Biostats Cluster</a></li>
    <li><a class="dropdown-item" href="../articles/CIDA_computing_resources.html">CIDA Computing Resources</a></li>
    <li><a class="dropdown-item" href="../articles/coding_guidelines.html">CIDA-coding-guidelines</a></li>
    <li><a class="dropdown-item" href="../articles/cron-jobs.html">Cron Jobs</a></li>
    <li><a class="dropdown-item" href="../articles/data_storage.html">CIDA-data-storage-guidelines</a></li>
    <li><a class="dropdown-item" href="../articles/git.html">Tracking code in Git/GitHub</a></li>
    <li><a class="dropdown-item" href="../articles/sas-macros.html">CIDA SAS Macros</a></li>
    <li><a class="dropdown-item" href="../articles/tabling_packages.html">Tabling Packages</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CIDA-coding-guidelines</h1>
                        <h4 data-toc-skip class="author">Research Tools
Committee</h4>
            
            <h4 data-toc-skip class="date">2024-12-05</h4>
      

      <div class="d-none name"><code>coding_guidelines.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="coding-guidelines-and-best-practices">Coding Guidelines and Best Practices<a class="anchor" aria-label="anchor" href="#coding-guidelines-and-best-practices"></a>
</h2>
<p><em>Except for binary machine code, all computer code is intended to
be read by humans.</em></p>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>Within a CIDA project, code should follow CIDA’s standard
organizational structure and be consistently tracked in a Git repository
on CIDA’s GitHub server. Strive to use best practices for coding
conventions.</p>
</div>
<div class="section level3">
<h3 id="cida-standards-for-organization">CIDA Standards for Organization<a class="anchor" aria-label="anchor" href="#cida-standards-for-organization"></a>
</h3>
<div class="section level4">
<h4 id="file-organization">File Organization<a class="anchor" aria-label="anchor" href="#file-organization"></a>
</h4>
<p>Files should be organized to fit within the general CIDA file
structure. Within the root location of a project should be found the
folders:</p>
<ul>
<li>Admin – where any administrative files go (i.e., the SOW)</li>
<li>Background – where any background documents go</li>
<li>Code – where any code goes</li>
<li>DataProcessed – where data goes after any manipulation by the
statistician</li>
<li>DataRaw – where any raw data goes from an investigator</li>
<li>Dissemination – where any files go that have been sent to the
investigator, in the state they were sent</li>
<li>Reports – where any reports, figures, or other output goes</li>
</ul>
<p>Within Code/* any code files should be labelled in a usable way and
ordered, for example</p>
<ul>
<li>00_prep.R</li>
<li>01_dataread.R</li>
<li>01a_dataread_auxilliary.R</li>
<li>02_dataclean.R</li>
<li>…</li>
</ul>
<p>At the conclusion of a project any files labelled as such should be
the last version used; and when used together or in sequence result in
the final project results.</p>
</div>
<div class="section level4">
<h4 id="experimental-code">Experimental code<a class="anchor" aria-label="anchor" href="#experimental-code"></a>
</h4>
<ul>
<li>Any code in final scripts at project conclusion and archival should
be able to be run in sequence to achieve the result</li>
<li>Any code that is not included in the result is ‘experimental’ and
should be placed into a separate file, or commented out if left in the
main scripts</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="suggestions-for-easier-comprehension">Suggestions for easier comprehension<a class="anchor" aria-label="anchor" href="#suggestions-for-easier-comprehension"></a>
</h3>
<div class="section level4">
<h4 id="naming-conventions">Naming Conventions<a class="anchor" aria-label="anchor" href="#naming-conventions"></a>
</h4>
<p>Names should follow one of the following naming conventions
consistently within a script (with the exception of pre-existing column
titles from other databases), and be concise and meaningful. Avoid
naming objects the same or similar names to standard functions.</p>
<ul>
<li>alllowercase – all lowercase letters</li>
<li>period.separated – words separated by periods</li>
<li>underscore_separated – words separated by underscores</li>
<li>camelCase – words denoted by capital letters</li>
</ul>
</div>
<div class="section level4">
<h4 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h4>
<ul>
<li>If you find yourself copying and pasting code frequently, you’d
likely benefit from creating a function. Read the key ideas behind R
functions <a href="https://r4ds.had.co.nz/functions.html" class="external-link">here</a>.</li>
<li>Functions beyond trivial wrappers should start with a header that
describes the function, its input(s) and output(s) and any other
pertinent information about the function.<br>
</li>
<li>User-created functions should be named distinctly from other common
functions.<br>
</li>
<li>Returns from functions should be done explicitly, and not rely on
implicit returns.</li>
<li>Name your created functions as a descriptive verb and use nouns for
objects.</li>
</ul>
</div>
<div class="section level4">
<h4 id="commenting">Commenting<a class="anchor" aria-label="anchor" href="#commenting"></a>
</h4>
<ul>
<li>The start of a script file should start with a header containing at
least the title, the author, the date created, and the purpose of the
script.</li>
<li>Sections of code should be denoted by headers of consistent
formatting.</li>
<li>Any complex or involved code should be commented for what it is
doing and why.</li>
<li>Any non-standard choices in analysis should be commented and the
comment include a reference as to why this was done and when the
decision made.</li>
<li>Comments are for the why, not the what.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="best-practices">Best practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h3>
<p>This section describes best practices for R, R Markdown, and general
coding. They are not meant to be “enforced”, but if followed, they will
make your (and your CIDA collaborators’) lives easier later on.</p>
<div class="section level4">
<h4 id="r-scripts--r-files">R Scripts (.R files)<a class="anchor" aria-label="anchor" href="#r-scripts--r-files"></a>
</h4>
<ul>
<li>Avoid using <code><a href="https://rdrr.io/r/base/attach.html" class="external-link">attach()</a></code>, use <code><a href="https://rdrr.io/r/base/with.html" class="external-link">with()</a></code> instead
or another alternative.</li>
<li>Outside of function calls, use <code>&lt;-</code>, not
<code>=,</code> for assignment.</li>
<li>Do not use right-hand assignment (e.g., don’t do this:
<code>1 -&gt; x</code>)</li>
<li>For non-ubiquitous R packages, avoid using <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>,
and to instead use the :: operator when calling functions from their
specific libraries, e.g., <code><a href="../reference/pvalr.html">CIDAtools::pvalr</a></code>.</li>
<li>Place spaces around all infix operators (<code>+</code>,
<code>-</code>, <code>=</code>, <code>&lt;-</code>) and after all commas
(not before).</li>
<li>Use <a href="https://r4ds.had.co.nz/workflow-projects.html#rstudio-projects" class="external-link">RStudio’s
Projects</a> to avoid ever having to set your working directory in your
R scripts. Or, use <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> only once at the very top of
your script.</li>
<li>Use the pipe operator (<code>%&gt;%</code>), for reasons described
<a href="https://r4ds.had.co.nz/pipes.html" class="external-link">here</a>, but keep pipes
under 10 steps. Break up large sequences with intermediate objects with
meaningful names.</li>
</ul>
</div>
<div class="section level4">
<h4 id="r-markdown--rmd-files">R Markdown (.Rmd files)<a class="anchor" aria-label="anchor" href="#r-markdown--rmd-files"></a>
</h4>
<ul>
<li>Familiarize yourself with <a href="https://r4ds.had.co.nz/r-markdown.html#r-markdown" class="external-link">R Markdown’s
vast array of options and features</a>.</li>
<li>Ensure each notebook has a descriptive title, an evocative filename,
and a first paragraph that briefly describes the aims of the
analysis.</li>
<li>Before you finish for the day, make sure you can knit the notebook
(if you’re using caching, make sure to clear the caches). That will let
you fix any problems while the code is still fresh in your mind. This is
also a good time to push your new day’s code to GitHub (if you haven’t
been doing so already).</li>
<li>If you want your code to be reproducible in the long-run (i.e. so
you can come back to run it next month or next year), you’ll need to
track the versions of the packages that your code uses. For this
purpose, include a chunk at the end of your notebook (in an appendix)
that runs <code><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo()</a></code>. If you need to reproduce your
report in its entirety and with the same versions of packages, you will
then know which package and versions you need, and reinstall them
<code>CRAN</code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="general-best-practices-for-programming">General best practices for programming<a class="anchor" aria-label="anchor" href="#general-best-practices-for-programming"></a>
</h4>
<ul>
<li>If you discover an error in a data file, do not modify it directly,
but instead write code to correct the value. Explain (in comments) why
you made the fix.</li>
<li>Use ISO8601 YYYY-MM-DD format for dates so that’s there no
ambiguity.</li>
<li>Keep code to 80 characters or less per line. Exceptions exist for
hard-coded constants (such as path names or URLs) which cannot easily be
wrapped or shortened.</li>
<li>Program files should always be ASCII text files. Program files
should always be immediately source-able into R or SAS. If you cannot
source your file directly into R (SAS), then the file format is not
acceptable. Word processing programs like Microsoft Word do not save
files as text files – do not save code as Word documents.</li>
<li>Use a monospace font to write or display code. Variable space fonts
like Times New Roman can alter the apparent structure of a program (and
its readability).</li>
<li>Consistently indent your code. Comments should be indented to the
same level of indentation of the code to which the comment pertains.
Comments can also appear at the end of a code line if space
permits.</li>
<li>For all objects/functions in your code, strive for names that are
concise and meaningful. Similarly, ensure the script names are also
<u>concise</u> and <u>meaningful</u>.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="workflow-best-practices">Workflow best practices<a class="anchor" aria-label="anchor" href="#workflow-best-practices"></a>
</h3>
<p>Quote from R for Data Science:</p>
<blockquote>
<p>One day you will need to quit R, go do something else and return to
your analysis the next day. One day you will be working on multiple
analyses simultaneously that all use R and you want to keep them
separate. One day you will need to bring data from the outside world
into R and send numerical results and figures from R back out into the
world. To handle these real life situations, you need to make two
decisions: 1) What about your analysis is “real”, i.e. what will you
save as your lasting record of what happened? 2) Where does your
analysis “live”?</p>
</blockquote>
<p>Initially, you may consider your analysis to live in your R
environment (e.g. the objects listed in the environment pane). However,
it’s much easier to recreate this environment from an R script than it
is to recreate an R script from the environment! Your analysis therefore
lives in your code. So, if you haven’t already, you should instruct
RStudio to never preserve your workspace between sessions to foster this
attitude and to make your life easier in the long-term.</p>
<p><img src="coding_1.png" width="75%" height="75%" style="display: block; margin: auto;"></p>
<p>After changing this, you will notice when you restart RStudio that it
will not remember the results of the code you ran last time, because
remember – your analysis lives in your code.</p>
<p>If you are working within an Rstudio Project, you will not usually
have to worry about absolute vs relative file paths (as files will
automatically be saved/loaded from the location of the main project (or
its subdirectories). However, if you are knitting a R Markdown file in
the <code>Reports/*</code> subdirectory and/or loading files elsewhere,
you may consider wrapping file paths inside the <code>here()</code>
function (from the <a href="https://here.r-lib.org" class="external-link">here package</a>) to
ensure all file paths work as anticipated. If your data live on an
external server, you may need to point to that server when reading in
data (this would be an absolute file path) rather than saving in
<code>DataRaw/*</code>. If this is the case, please indicate in the
project readme file (or that in <code>DataRaw/*</code> the information
on where the data exists (and a contact email address for the
owners/maintainers of this server).</p>
</div>
<div class="section level3">
<h3 id="useful-reporting-functions-the-cidatools-r-package">Useful reporting functions: The CIDAtools R Package<a class="anchor" aria-label="anchor" href="#useful-reporting-functions-the-cidatools-r-package"></a>
</h3>
<ul>
<li>The CIDAtools R package, available <a href="https://github.com/CIDA-CSPH/CIDAtools" class="external-link">here</a>, has a suite of
useful functions that makes producing CIDA reports easier. The readme of
this package also has information on reporting templates/outlines.</li>
<li>Please see the package documentation for more information, and
contact the <a href="mailto:ryan.a.peterson@cuanschutz.edu">committee
chair</a> with suggestions for making this package more useful.</li>
</ul>
</div>
<div class="section level3">
<h3 id="where-to-store-your-code">Where to store your code<a class="anchor" aria-label="anchor" href="#where-to-store-your-code"></a>
</h3>
<ul>
<li>All project files + code, with the exception of data, can be stored
anywhere (locally, on OneDrive, etc).</li>
<li>Project code must be tracked in a Git repository and regularly
pushed to GitHub. (see below)</li>
<li>Project data (stored in <code>DataRaw/</code> or
<code>DataProcessed/</code>) should be backed up to the CIDA drive at
least weekly; see this committee’s data storage guidelines and
<code>CIDAtools::BackupProject()</code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="tracking-codefiles-in-git-and-github">Tracking code/files in Git and GitHub<a class="anchor" aria-label="anchor" href="#tracking-codefiles-in-git-and-github"></a>
</h3>
<ul>
<li>Your code and files should be committed and pushed to GitHub
regularly (daily recommended).</li>
<li>
<strong>Data should not be tracked in Git</strong>. Ensure your
repository has a text file titled <code>.gitignore</code> at its main
level that tells Git software not to track any data related files or
file types. See below for a sample .gitignore file that ignores any CSV,
XLSX files, as well as any files stored in DataProcessed or DataRaw
subdirectories.</li>
<li>Contact <a href="mailto:ryan.a.peterson@cuanschutz.edu">Ryan
Peterson</a> or <a href="mailto:sph@medschool.zendesk.com">SOM IT</a>
with issues related to GitHub, or SOM IT.</li>
</ul>
</div>
<div class="section level3">
<h3 id="useful-links">Useful Links<a class="anchor" aria-label="anchor" href="#useful-links"></a>
</h3>
<ul>
<li><a href="https://r4ds.had.co.nz" class="external-link">R for Data Science</a></li>
<li><a href="https://google.github.io/styleguide/Rguide.html" class="external-link">Google
style guide</a></li>
</ul>
<p>Sample <code>.gitignore</code> file, stored at the project-level
directory (the top level of your git repository):</p>
<p><img src="coding_2.png" width="50%" height="50%" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by CIDA Research Tools Committee.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
